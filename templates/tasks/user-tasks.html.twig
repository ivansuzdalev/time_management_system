{% extends 'base.html.twig' %}

{% block title %}Tasks{% endblock %}

{% block body %}
    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    <div class="container fill">

        <h1 class="h3 mb-3 font-weight-normal">User: {{ username }} tasks</h1>

        <div>

            <div class="row" style="margin-top: 20px;">
            <table>
                <tr>
                    <td><a href="/user-tasks?page=0"><span style="color:blue"><b>Begin</b></span></a></td><td>;</td>

                {% for page_nr, limit in pagination_arr %}
                    {% if page == page_nr %}
                        <td><a href="/user-tasks?page={{page_nr}}"><span style="color:red"><b>{{page_nr}}</b></span></a></td><td>;</td>
                    {% endif %}
                    {% if page != page_nr %}
                        <td><a href="/user-tasks?page={{page_nr}}">{{page_nr}}</a></td><td>;</td>
                    {% endif %}
                {% endfor %}

                    <td><a href="/user-tasks?page={{pages_count}}"><span style="color:blue"><b>End</b></span></a></td><td>;</td>
                </tr>
            </table>
        </div>
        <div class="row" style="margin-top: 20px;">
            <table class="table table-dark" id="data-table">
                <tr>
                    <th>id</th>
                    <th>startFrom</th>
                    <th>endDateTime</th>
                    <th>title</th>
                    <th>dateTimeSpent</th>
                    <th>Complete</th>
                </tr>
                {% for row in tasks_arr_ob %}
                    <tr>
                        <td>{{row.id}}</td>  
                        {% if row.startFrom %}
                            <td>{{row.startFrom|date('Y-m-d H:i:s')}}</td> 
                        {% else %}
                            <td>-</td> 
                        {% endif %}
                        {% if row.endDateTime %}
                            <td>{{row.endDateTime|date('Y-m-d H:i:s')}}</td>                  
                        {% else %}
                            <td>-</td> 
                        {% endif %}
                        <td>{{row.title}}</td>                  
                        <td>{{row.dateTimeSpent}}</td>
                        <td><a href="/complete-task?id={{row.id}}&page={{page}}">Complete</a></td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>


{% endblock %}